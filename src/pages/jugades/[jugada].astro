---
import Layout from "../../layouts/Layout.astro";

let cookie = Astro.cookies.get("ruleta");

const vermells = [1,3,6,8,9]
const negres = [2,4,5,7,10]

function calculatePrize(jugadaPlayer, jugadaRuleta) {
    if (isNaN(jugadaPlayer)) {
        if (jugadaRuleta !== 0) {
            if ((jugadaRuleta % 2 === 0 && jugadaPlayer === "parell") || (jugadaRuleta % 2 !== 0 && jugadaPlayer === "imparell")) {
                return 20
            } else if((vermells.includes(jugadaRuleta) && jugadaPlayer === "vermell") || (negres.includes(jugadaRuleta) && jugadaPlayer === "negre")) {
                return 20
            }
        } else {
            return -20
        }
    } else if(parseInt(jugadaPlayer) === jugadaPlayer) {
        return 10
    } else {
        return -10
    }
}

function randomizeRoulette() {
    return Math.floor(Math.random() * 10);
}

function updateCookie(jugadaPlayer, jugadaRuleta, prize) {
    let cookieData = JSON.parse(cookie.value);
    cookieData.push({data: jugadaPlayer, jugadaRuleta, prize});
    Astro.cookies.set("ruleta", JSON.stringify(cookieData), { path: '/' });
}

const { jugadaPlayer } = Astro.params;

const jugadaRuleta = randomizeRoulette();

let prize = calculatePrize(jugadaPlayer, jugadaRuleta);
---
